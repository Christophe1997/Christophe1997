<!DOCTYPE html>
<html>
  <head>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-112755173-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
  git cheat sheet &ndash; CastOff

    </title>
    
    
    <meta name="description" property="og:description" content="本地操作 状态检览 1 2 $ git status -s XY PATH1 -&amp;gt; PATH2 PATH2只有在PATH1关联到不同的路径时才会显示(例如, 文件重命名). XY是两个状态码, 在合并冲突的|">
    

    <meta name="apple-mobile-web-app-title" content="CastOff">
    
    
    <link rel="icon" href="/favicon-64.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="mask-icon" size="any" href="/pinned-icon.svg">
    
    
    


    <link rel="stylesheet" href="/assets/syntax.css">
    <link rel="stylesheet" href="/assets/primer-build.css">
    <link rel="stylesheet" href="/assets/style.css">
  </head>


  <body class="bg-gray">
    <div id="holy" class="container-lg bg-white h-100">

      <div id="header" class="px-1 bg-white">
        <nav class="UnderlineNav UnderlineNav--right px-2">
  <a class="UnderlineNav-actions muted-link h2" href="https://christophe1997.github.io">
    CastOff
  </a>

  
  
  <div class="UnderlineNav-body">
    
    
    
    <a class="UnderlineNav-item " href="/posts/">
      
      <span>Blogs</span>
    </a>
    
    
    
    
    <a class="UnderlineNav-item " href="/">
      
      <span>About</span>
    </a>
    
    
  </div>
  
</nav>

      </div>

      <div role="main" id="main" class="holy-main markdown-body px-4 bg-white">
        

<div class="Subhead">
  <div class="Subhead-heading">
    <div class="h1 mt-3 mb-1">git cheat sheet</div>
  </div>
  <div class="Subhead-description">
    


<a href='/categories/%E6%9D%82%E9%A1%B9' class="muted-link">
  <span class="Label Label--gray-darker">杂项</span>
</a>



<a href='/tags/cheat-sheet' class="muted-link">
  <span class="Label Label--gray">cheat sheet</span>
</a>

<a href='/tags/git' class="muted-link">
  <span class="Label Label--gray">Git</span>
</a>



    
    <div class="float-md-right">
      <span title="Lastmod: 2019-12-04. Published at: 2018-03-11.">
        
          Lastmod: 2019-12-04
        
      </span>
    </div>
    
  </div>
</div>
<article>
  
  <section class="pb-6 mb-3 border-bottom">
    <h2 id="heading">本地操作</h2>
<h3 id="heading1">状态检览</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git status -s
XY PATH1 -&gt; PATH2
</code></pre></td></tr></table>
</div>
</div><p>PATH2只有在PATH1关联到不同的路径时才会显示(例如, 文件重命名).</p>
<!-- raw HTML omitted -->
<p>XY是两个状态码, 在合并冲突的时候, X和Y分别表示合并双方的修改状态; 而在一般情况下X表示暂存区域(<em>index</em>)的状态, Y表示工作目录的状态(<em>work tree</em>):</p>
<ul>
<li>' ' = unmodified</li>
<li>M = modified</li>
<li>A = added</li>
<li>D = deleted</li>
<li>R = renamed</li>
<li>C = copied</li>
<li>U = updated but unmerged</li>
</ul>
<p>未被追踪(<em>untracked</em>)的文件, XY = ??; 默认不显示忽略的文件(<em>ignored</em>), 除非使用<code>--ignore</code>选项, 此时XY = !!.</p>
<h3 id="heading2">查看已暂存和未暂存的修改</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git diff
</code></pre></td></tr></table>
</div>
</div><p>用来比较工作目录中当前文件和暂存区域快照之间的差异, 使用<code>--staged</code>选项查看已经暂存的将要添加到下次修改的内容</p>
<h3 id="heading3">提交更新</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git commit
</code></pre></td></tr></table>
</div>
</div><p>这种方式会启动shell的环境变量<code>$EDDITOR</code>所指定的软件, 一般是VIM或emacs, 或者使用<code>git	config	--global	core.editor</code>来指定编辑器,
使用<code>-v</code>选项将<code>diff</code>的内容追加到编辑器中, 使用<code>-m '${comment}'</code>选项来直接添加提交信息, 而不打开编辑器.</p>
<h4 id="heading4">跳过使用暂存区</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git commit -a
</code></pre></td></tr></table>
</div>
</div><p>git会自动把所有已经跟踪过的文件暂存起来一并提交, 跳过<code>git add</code>步骤.</p>
<h3 id="heading5">移除文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git rm <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>移除工作目录文件, 并记录移除操作, 如果删除之前修改过并且已经放到暂存区域的话, 必须使用强制删除选项<code>-f</code>, 用于防止误删.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git rm --cached <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>从git仓库(亦从暂存区移除)移除文件, 而保留磁盘文件</p>
<h3 id="heading6">移动文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git mv <span class="si">${</span><span class="nv">oldFileName</span><span class="si">}</span> <span class="si">${</span><span class="nv">newFileName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>等价于</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ mv <span class="si">${</span><span class="nv">oldFileName</span><span class="si">}</span> <span class="si">${</span><span class="nv">newFileName</span><span class="si">}</span>
$ git rm <span class="si">${</span><span class="nv">oldFileName</span><span class="si">}</span>
$ git add <span class="si">${</span><span class="nv">newFileName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="heading7">查看提交历史</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git log
</code></pre></td></tr></table>
</div>
</div><p>默认情况下, git会按提交时间列出所有的更新, 最近的更新排在最上面. 使用<code>-p</code>选项来显示每次提交的内容差异; <code>-${n}</code>选项来明确要显示几次提交,
n为自然数; <code>--stat</code>选项输出每次提交的简略统计信息; <code>--pretty</code>来指定使用不同的默认格式的方式展示提交历史, 格式有<code>oneline</code>, <code>short</code>,
<code>full</code>和<code>fuller</code>, 或者用<code>--pretty=format:&quot;${format}&quot;</code>来指定显示格式; <code>--graph</code>选项使用ASCII字符形象地展示分支, 合并历史.</p>
<h3 id="heading8">撤销操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git commit --amend
</code></pre></td></tr></table>
</div>
</div><p>用来尝试重新提交, 修改提交信息.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git reset HEAD <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>撤销文件暂存.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git checkout -- <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>撤销对文件的修改(丢失修改信息).</p>
<h2 id="heading9">远程仓库使用</h2>
<h3 id="heading10">查看远程仓库</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git remote
</code></pre></td></tr></table>
</div>
</div><p>使用<code>-v</code>选项来显示对应的url.</p>
<p>如果想要查看一个远程仓库的更多信息, 使用<code>git remote show ${remoteName}</code></p>
<h3 id="heading11">从远程仓库中抓取与拉取</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git fetch <span class="si">${</span><span class="nv">remoteName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>访问远程仓库, 从中拉取所有你还没有的数据, 而不会自动合并或修改当前的工作, 需要手动合并.</p>
<p>使用<code>clone</code>会自动将其添加为远程仓库并默认为'origin&rsquo;.</p>
<p>如果一个分支设置为跟踪一个远程分支, 可以使用<code>git pull</code>来自动抓取然后合并远程分支到当前分支; 默认情况<code>git clone</code>会自动的设置本地master
分支跟踪clone的远程仓库的master分支</p>
<h3 id="heading12">远程仓库的移除与重命名</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git remote rename <span class="si">${</span><span class="nv">oldName</span><span class="si">}</span> <span class="si">${</span><span class="nv">newName</span><span class="si">}</span>
git remote rm <span class="si">${</span><span class="nv">remoteName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="heading13">分支管理</h2>
<h3 id="heading14">分支的新建与合并</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git checkout -b <span class="si">${</span><span class="nv">branchName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>创建新分支并切换当前分支至新分支, 等价于:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ git branch <span class="si">${</span><span class="nv">branchName</span><span class="si">}</span>
$ git checkout <span class="si">${</span><span class="nv">branchName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git merge <span class="si">${</span><span class="nv">branchName</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p>合并到当前分支, 使用<code>rebase</code>来确保在向远程分支推送时提交历史的整洁, 即<code>rebase</code>和<code>merge</code>在提交历史上的存在差异.</p>
<h3 id="heading15">分支管理</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git branch
</code></pre></td></tr></table>
</div>
</div><p>显示所有分支, <code>-v</code>选项来查看每一个分支的最后一次提交信息; <code>--merged</code>和<code>--no-merged</code>来查看已经合并或尚未合并到当前分支的的分支; <code>-d</code>选项来
删除已经完全合并了的分支, <code>-D</code>选项强制删除分支.</p>
<h2 id="heading16">配置</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git config credential.helper store
</code></pre></td></tr></table>
</div>
</div><p>保存使用HTTP协议的密码</p>
<h3 id="heading17">换行符</h3>
<p>由于文本文件使用的换行符在不同的操作系统下不一致的问题(在Unix/Linux上为<code>0x0A(LF)</code>, 而在DOS/Windows上为<code>0x0D0A(CRLF)</code>), 当换行符发生改变时,
Git会认为整个文件被修改而导致无法<code>diff</code>, 此时一种解决方案是设置全局的<code>autocrlf</code>配置项:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git config --global core.autocrlf <span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><p>其中配置项的值可以是:</p>
<ol>
<li><strong>true</strong>: 提交时转为LF, 检出时转为CRLF</li>
<li><strong>false</strong>: 提交检出均不转换</li>
<li><strong>input</strong>: 提交时转为LF, 检出时不转换</li>
</ol>
<p>另外还有<code>safecrlf</code>配置项, 其值为:</p>
<ol>
<li><strong>true</strong>: 拒绝包含混合换行符文件的提交</li>
<li><strong>false</strong>: 允许包含混合换行符文件提交</li>
<li><strong>warn</strong>: 提交包含混合换行符文件时给出警告</li>
</ol>
<p>另外一种方案则是对每个仓库单独建一个<code>.gitattributes</code>文件来单独配置:</p>
<pre><code># from https://help.github.com/articles/dealing-with-line-endings/
# Set the default behavior, in case people don't have core.autocrlf set.
* text=auto

# Explicitly declare text files you want to always be normalized and converted
# to native line endings on checkout.
*.c text
*.h text

# Declare files that will always have CRLF line endings on checkout.
*.sln text eol=crlf

# Denote all files that are truly binary and should not be modified.
*.png binary
*.jpg binary
</code></pre><p>其中几条规则:</p>
<ol>
<li><code>text=auto</code>: Git自动处理这些文件, 通常建议的默认选项</li>
<li><code>text eol=crlf</code>: Git将在检出这些文件时自动转成CRLF, 建议将一些必须CRLF的文件设为该配置(如<code>.bat</code>), 另外还有<code>eol=lf</code></li>
<li><code>binary</code>: Git会认为这些文件不应该改变, 等同于<code>text -diff</code></li>
</ol>

  </section>

  <section>
    
      
    
  </section>
</article>

      </div>

      <div id="side" class="pr-1 bg-white">
        <aside class="pr-3">
          
  
    <div id="toc" class="Box Box--blue mb-3">
      <b>git cheat sheet</b><nav id="TableOfContents">
  <ul>
    <li><a href="#heading">本地操作</a>
      <ul>
        <li><a href="#heading1">状态检览</a></li>
        <li><a href="#heading2">查看已暂存和未暂存的修改</a></li>
        <li><a href="#heading3">提交更新</a></li>
        <li><a href="#heading5">移除文件</a></li>
        <li><a href="#heading6">移动文件</a></li>
        <li><a href="#heading7">查看提交历史</a></li>
        <li><a href="#heading8">撤销操作</a></li>
      </ul>
    </li>
    <li><a href="#heading9">远程仓库使用</a>
      <ul>
        <li><a href="#heading10">查看远程仓库</a></li>
        <li><a href="#heading11">从远程仓库中抓取与拉取</a></li>
        <li><a href="#heading12">远程仓库的移除与重命名</a></li>
      </ul>
    </li>
    <li><a href="#heading13">分支管理</a>
      <ul>
        <li><a href="#heading14">分支的新建与合并</a></li>
        <li><a href="#heading15">分支管理</a></li>
      </ul>
    </li>
    <li><a href="#heading16">配置</a>
      <ul>
        <li><a href="#heading17">换行符</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
  

  
    <div>
      
    </div>
  

        </aside>
      </div>

      <div id="footer" class="pt-2 pb-3 bg-white text-center">
        

  <span class="text-small text-gray">
    ©Christophe &middot; 

    Powered by the
    <a href="https://github.com/qqhann/hugo-primer" class="link-gray-dark">Hugo-Primer</a> theme for
    <a href="https://gohugo.io" class="link-gray-dark">Hugo</a>.
  </span>


      </div>
    </div>

    
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>
    
  </body>
</html>
