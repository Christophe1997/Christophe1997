<!DOCTYPE html>
<html>
  <head>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-112755173-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
  some ubuntu installing problems &ndash; CastOff

    </title>
    
    
    <meta name="description" property="og:description" content="One day ago, I started upgrading my Ubuntu 16.04 to 18.04, after I see the update from website. The most diffrience betwen 16.04 and 18.04 is that the 18.04 use GNOME desktop rather than Unity. I had heard that the GNOME desktop is better than Unity, so I tried 18.04 for the new desktop. Unfortunately, after I upgraded my OS, I found that the GNOME desktop wasjust so uncomfortable. And|">
    

    <meta name="apple-mobile-web-app-title" content="CastOff">
    
    
    <link rel="icon" href="/favicon-64.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="mask-icon" size="any" href="/pinned-icon.svg">
    
    
    

    <meta name="msvalidate.01" content="A66009ECF32987EBBB7783F428A03342" />
    <link rel="stylesheet" href="/assets/syntax.css">
    <link rel="stylesheet" href="/assets/primer-build.css">
    <link rel="stylesheet" href="/assets/style.css">
  </head>


  <body class="bg-gray">
    <div id="holy" class="container-lg bg-white h-100">

      <div id="header" class="px-1 bg-white">
        <nav class="UnderlineNav UnderlineNav--right px-2">
  <a class="UnderlineNav-actions muted-link h2" href="https://christophe1997.github.io">
    CastOff
  </a>

  
  
  <div class="UnderlineNav-body">
    
    
    
    <a class="UnderlineNav-item " href="/posts/">
      
      <span>Blogs</span>
    </a>
    
    
    
    
    <a class="UnderlineNav-item " href="/">
      
      <span>About</span>
    </a>
    
    
  </div>
  
</nav>

      </div>

      <div role="main" id="main" class="holy-main markdown-body px-4 bg-white">
        

<div class="Subhead">
  <div class="Subhead-heading">
    <div class="h1 mt-3 mb-1">some ubuntu installing problems</div>
  </div>
  <div class="Subhead-description">
    


<a href='/categories/%E6%9D%82%E9%A1%B9' class="muted-link">
  <span class="Label Label--gray-darker">杂项</span>
</a>



<a href='/tags/ubuntu' class="muted-link">
  <span class="Label Label--gray">Ubuntu</span>
</a>

<a href='/tags/grub' class="muted-link">
  <span class="Label Label--gray">GRUB</span>
</a>



    
    <div class="float-md-right">
      <span title="Lastmod: 2019-12-04. Published at: 2018-04-28.">
        
          Lastmod: 2019-12-04
        
      </span>
    </div>
    
  </div>
</div>
<article>
  
  <section class="pb-6 mb-3 border-bottom">
    <p>One day ago, I started upgrading my Ubuntu 16.04 to 18.04, after I see the update from website. The most diffrience
betwen 16.04 and 18.04 is that the 18.04 use GNOME desktop rather than Unity. I had heard that the GNOME desktop is
better than Unity, so I tried 18.04 for the new desktop. Unfortunately, after I upgraded my OS, I found that the GNOME
desktop wasjust so uncomfortable. And after one hour I gone back to 16.04:(, and content of this article is about the
problems I met while reinstalling the OS.</p>
<!-- raw HTML omitted -->
<p>I installed the 16.04 OS just the same as what I done before: burned the IOS to USB, started the computer, and do what the OS suggested to do.</p>
<h2 id="soft-lockup">soft lockup</h2>
<p>The first thing I met was what called soft lockup, like below</p>
<pre><code> watchdog: BUG: soft lockup cpu#0 stuck for 23s.
</code></pre><p>emmm, it was quite depressed, but fortunately I found the solutions on <em>ubuntu forums</em>. The
problem can be solved add grub boot option as below.</p>
<p>When you stay at the GRUB menu(you maybe need to press and hold the left <code>shift</code> key right
after starting the system if you only has one OS.). Then Hightlight the kernel you want to
use and press the <code>e</code> key, thus you should able to see and edit the commands associated
with the hightlighted kernel you do before. Go down to the line starting with <code>linux</code> and
add the parameter <code>nomodeset</code> to its end. Now press <code>Ctrl</code> + <code>x</code> to boot in the specific
config. And remember it just work temporarily, you should configure the <code>/etc/default/grub</code>
file as same as what you do before, finally run <code>sudo update-grub</code> to permanently update
GRUB's configuration.</p>
<p>So in conclusion, what you need to do is add <code>nomodeset</code> to kernel boot configure.</p>
<h2 id="pcie-bus-error">PCIe Bus error</h2>
<p>After I solved the problem above, finally I was led to a <strong>NEW PROBLEM</strong>:( The PCIe Bus
error actually appeared before the soft lockup, it was solved by <em>askubuntu</em>, just add
<code>pci=noaer</code> to the kernel boot config, which I explained at soft lockup.</p>
<p>Finally I could use my Ubuntu again. But what the parameter, like <code>pci=nomsi</code> really mean?,
or &ldquo;just work&rdquo; is fine? Thanks the internet a lot, I found an post about this, here are
some summary.</p>
<ol>
<li>
<p><em>nomodeset</em>, may be the most common one, which is needed for some graphics cards that
otherwise boot into a black screen or corrupted splash. The newest kernels have moved the
video mode setting into the kernel. So all the programming of hardware specific clock rates
and registers on the video card happen in the kernel rather than in the X driver when the
X server starts. This make it possible to have high resolution nice looking splash(boot)
screens and flicker free transitions from boot splash to login screen. Unfortunately, on
some cards this doesn't work properly and you end up with a black screen(or soft lockup
above). Adding the parameter instructs the kernel to not load video drivers and use BIOS
modes instead until X is loaded. Note that this option is sometions needed for nVidia cards
when using the default &ldquo;nouveau&rdquo; drivers. Installing proprietary nvidia drivers ususlly
makes this option no longer necessary, so it may not be needed to make this option
permanet, just for one boot until you installed the nvidia drivers.</p>
</li>
<li>
<p><em>pci=</em>, the argument can be used to change the behaviour of PCI bus device problem and
device behaviour.</p>
</li>
</ol>
<h3 id="ubuntu-and-windows-time-difference">Ubuntu and Windows time difference</h3>
<p>Operating systems store and retrieve the time in the hardware clock located on your motherland so
that it can keep track of the time even when the system does not have power. Most operating system(Linux,
Unix, MacOS) store the time on the hardware clock as UTC by default, though some system(notably Microsoft
Windows) store the time on the hardware clock as the &ldquo;local&rdquo; time. This causes problems in a dual boot system
if both system view the hardware clock differently.</p>
<p>The advantage of having the hardware clock as UTC is that you don't need to change the hardware clock when moving
bewteen timezones or when Daylight Savings Time(DST) begins or ends as UTC does not have DST or timezone offsets.
And changing Linux to use local time is easier and more reliable than changing Windows to use UTC.</p>
<ol>
<li>
<p><em>Make Linux use &lsquo;local&rsquo; time</em>,
pre-Ubuntu 15.04 systems, you should edit <code>/etc/default/rcS</code> and add or change the following section
<code>UTC=no</code>, while Ubuntu 15.04 and above you should run <code>timedatectl set-local-rtc 1 --adjust-system-clock</code> in
terminal since the Ubuntu use timedatectl to manage time after 15.04.</p>
</li>
<li>
<p><em>Make Windows use UTC</em>,
for windows 10 you can create a *.reg(on the desktop) with the following content and double-click it to import
it to registry:</p>
<pre><code>Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation]
 &quot;RealTimeIsUniversal&quot;=dword:00000001
</code></pre></li>
</ol>

  </section>

  <section>
    
      
    
  </section>
</article>

      </div>

      <div id="side" class="pr-1 bg-white">
        <aside class="pr-3">
          
  
    <div id="toc" class="Box Box--blue mb-3">
      <b>some ubuntu installing problems</b><nav id="TableOfContents">
  <ul>
    <li><a href="#soft-lockup">soft lockup</a></li>
    <li><a href="#pcie-bus-error">PCIe Bus error</a>
      <ul>
        <li><a href="#ubuntu-and-windows-time-difference">Ubuntu and Windows time difference</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
  

  
    <div>
      
    </div>
  

        </aside>
      </div>

      <div id="footer" class="pt-2 pb-3 bg-white text-center">
        

  <span class="text-small text-gray">
    ©Christophe &middot; 

    Powered by the
    <a href="https://github.com/qqhann/hugo-primer" class="link-gray-dark">Hugo-Primer</a> theme for
    <a href="https://gohugo.io" class="link-gray-dark">Hugo</a>.
  </span>


      </div>
    </div>

    
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>
    
  </body>
</html>
